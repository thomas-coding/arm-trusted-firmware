/*
 * Copyright (c) 2014-2022, Arm Limited and Contributors. All rights reserved.
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */

#ifndef PLATFORM_DEF_H
#define PLATFORM_DEF_H

#include <lib/utils_def.h>
#include <plat/common/common_def.h>

/* Thomas-a15 memory map
 *
 *  0x00000000 .. 0x01ffffff : Flash(32M)
 *  0x10000000 .. 0x11ffffff : SRAM(32M)
 *  0x20000000 .. 0x27ffffff : DDR(128M)
 *  0x40000000 .. 0x40000fff : UART(4K)
 *  0x50000000 .. 0x50000fff : Thomas Test Device(4K)
 *  0x60000000 .. 0x6000ffff : GIC Distributor(64K)
 *  0x61000000 .. 0x6001ffff : GIC Redistributor(128K)
 */

/* ATF memory map
 *  FLASH binary
 *  0x00000000 .. 0x00100000 : BL1 binary (1M)
 *  0x00100000 .. 0x001fffff : BL2 binary (1M)
 *  0x00200000 .. 0x002fffff : BL32 binary (1M)
 *
 *  RAM (4M)
 *  0x10300000 .. 0x103fffff : BL1 RW RAM (top 1M)
 *  0x102f0000 .. 0x102fffff : Shared RW RAM (4k)
 *  SPACE
 *  0x10000000 .. 0x100fffff : BL2 Runing RAM (1M)
 *  0x10100000 .. 0x101fffff : BL32 Runing RAM (1M)
 */

#define PLATFORM_CORE_COUNT	U(1)

#define PLATFORM_STACK_SIZE		0x1000

//TODO
#define PLAT_MAX_OFF_STATE		U(2)
#define PLAT_MAX_RET_STATE		U(1)
#define PLAT_MAX_PWR_LVL		U(1)

#define BL_RAM_BASE			UL(0x10000000)
#define BL_RAM_SIZE			UL(4 * 1024 * 1024)

#define BL_FLASH_BASE			UL(0x00000000)
#define BL_FLASH_SIZE			UL(32 * 1024 * 1024)

/* BL1 1M SRAM */
/* bl1_calc_bl2_mem_layout assuming this is on top */
#define BL1_RW_BASE			UL(0x10300000)
#define BL1_RW_SIZE			UL(1024 * 1024)
#define BL1_RW_LIMIT		(BL1_RW_BASE + BL1_RW_SIZE)

#define BL_SHARE_MEM_SIZE		(4 * 1024)
#define BL_SHARE_MEM_BASE		(BL1_RW_BASE - BL_SHARE_MEM_SIZE)
#define BL_SHARE_LIMIT			(BL1_RW_BASE)

/* BL1 1M FLASH*/
#define BL1_RO_BASE			UL(0x00000000)
#define BL1_RO_SIZE			UL(1024 * 1024)
#define BL1_RO_LIMIT		(BL1_RO_BASE + BL1_RO_SIZE)

/* BL2 1M FLASH and SRAM */
#define BL2_BINARY_BASE			UL(0x00100000)
#define BL2_BINARY_SIZE			UL(1024 * 1024)
#define BL2_BINARY_LIMIT		(BL2_BINARY_BASE + BL2_BINARY_SIZE)

#define BL2_BASE			UL(0x10000000)
#define BL2_SIZE			UL(1024 * 1024)
#define BL2_LIMIT			(BL2_BASE + BL2_SIZE)

/* BL32(sp min) 1M FLASH and SRAM */
#define BL32_BINARY_BASE			UL(0x00200000)
#define BL32_BINARY_SIZE			UL(1024 * 1024)
#define BL32_BINARY_LIMIT		(BL32_BINARY_BASE + BL32_BINARY_SIZE)

#define BL32_BASE			UL(0x10100000)
#define BL32_SIZE			UL(1024 * 1024)
#define BL32_LIMIT			(BL32_BASE + BL32_SIZE)

/* BL33(uboot) 1M FLASH and SRAM*/
#define BL33_BINARY_BASE			UL(0x00300000)
#define BL33_BINARY_SIZE			UL(1024 * 1024)
#define BL33_BINARY_LIMIT		(BL32_BINARY_BASE + BL32_BINARY_SIZE)

#define BL33_BASE			UL(0x10200000)
#define BL33_SIZE			UL(1024 * 1024)
#define BL33_LIMIT			(BL32_BASE + BL32_SIZE)

//TODO
#define CACHE_WRITEBACK_GRANULE		64

//TODO
#define A15_PRIMARY_CPU			0x0

//TODO
#define MAX_IO_HANDLES			7
#define MAX_IO_DEVICES			7

//TODO
#define PLAT_VIRT_ADDR_SPACE_SIZE	(1ULL << 32)
#define PLAT_PHY_ADDR_SPACE_SIZE	(1ULL << 32)
#define MAX_MMAP_REGIONS		16
#define MAX_XLAT_TABLES			16

/*
 * PL011 related constants
 */
#define PL011_UART0_BASE		UL(0x40000000)
#define PL011_BAUDRATE			UL(115200)
#define PL011_UART_CLK_IN_HZ	UL(24000000)
#define PL011_UART_SIZE			UL(0x1000)

// GIC for sp-min
#define PLAT_ARM_GICD_BASE		UL(0x60000000)
#define PLAT_ARM_GICD_SIZE		UL(0x10000)
#define PLAT_ARM_GICR_BASE		UL(0x61000000)
#define PLAT_ARM_GICR_SIZE		UL(0x20000)

/* Interrupt numbers */
#define ARM_IRQ_SEC_PHY_TIMER		29

#define ARM_IRQ_SEC_SGI_0		8
#define ARM_IRQ_SEC_SGI_1		9
#define ARM_IRQ_SEC_SGI_2		10
#define ARM_IRQ_SEC_SGI_3		11
#define ARM_IRQ_SEC_SGI_4		12
#define ARM_IRQ_SEC_SGI_5		13
#define ARM_IRQ_SEC_SGI_6		14
#define ARM_IRQ_SEC_SGI_7		15

#define PLAT_ARM_G1S_IRQ_PROPS(grp) \
	INTR_PROP_DESC(ARM_IRQ_SEC_PHY_TIMER, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_LEVEL), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_0, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_1, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_2, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_3, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_4, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_5, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_6, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE), \
	INTR_PROP_DESC(ARM_IRQ_SEC_SGI_7, GIC_HIGHEST_SEC_PRIORITY, (grp), \
		GIC_INTR_CFG_EDGE)

#define PLAT_ARM_G0_IRQ_PROPS(grp)

/* sp min */
#define PLATFORM_CLUSTER_COUNT		1

#endif /* PLATFORM_DEF_H */
